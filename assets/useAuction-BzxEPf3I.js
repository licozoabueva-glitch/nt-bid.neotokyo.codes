const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-CDIM3f-Z.js","assets/main-CVmT0YyI.js"])))=>i.map(i=>d[i]);
import{h as k,k as Ce,i as Qe,l as de,t as le,_ as Ve,m as ee,n as We,o as te,p as Ye,q as Ze,v as R,x as Xe,y as Je,A as et,D as Te,U as ve,T as tt,E as z,F as nt,G as T,H as at,f as Q,I as D,J as rt,K as ne,M as Ie,N as Ee,P as st,Q as ot,S as it,V as ct,W as ut,X as dt,Y as lt,Z as Fe,$ as ft,a0 as Ne,a1 as pt,a2 as ht,a3 as mt,a4 as yt,a5 as wt,a6 as gt,a7 as bt,a8 as fe,a9 as Be,aa as ke,ab as Pt,ac as Ae,ad as xt,ae as Ct,af as Tt,ag as vt,ah as It,ai as Et,aj as Ft,ak as W,al as Nt,am as H,an as Bt,a as G,ao as _e,u as Y,ap as ae,r as B,aq as re,ar as kt,j as S,c as pe,B as At,R as he,as as me,at as se,au as _t}from"./main-CVmT0YyI.js";import{u as oe}from"./useSuspenseQuery-CACd6q5J.js";import{M as Rt,r as Re,N as ie,C as _,A as V}from"./constants-BNADs_9s.js";class Se extends k{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class Z extends k{constructor({docsPath:t,metaMessages:a,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:t,metaMessages:a,name:"AccountTypeNotSupportedError"})}}function St(e){const t=Ce(`0x${e.substring(4)}`).substring(26);return Qe(`0x${t}`)}async function Gt({hash:e,signature:t}){const a=de(e)?e:le(e),{secp256k1:n}=await Ve(async()=>{const{secp256k1:s}=await import("./secp256k1-CDIM3f-Z.js");return{secp256k1:s}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:i,s:f,v:d,yParity:l}=t,y=Number(l??d),m=ye(y);return new n.Signature(ee(i),ee(f)).addRecoveryBit(m)}const s=de(t)?t:le(t);if(We(s)!==65)throw new Error("invalid signature length");const u=te(`0x${s.slice(130)}`),c=ye(u);return n.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(a.substring(2)).toHex(!1)}`}function ye(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function qt({hash:e,signature:t}){return St(await Gt({hash:e,signature:t}))}function $t(e){const{chainId:t,nonce:a,to:n}=e,r=e.contractAddress??e.address,o=Ce(Ye(["0x05",Ze([t?R(t):"0x",r,a?R(a):"0x"])]));return n==="bytes"?Xe(o):o}async function Ge(e){const{authorization:t,signature:a}=e;return qt({hash:$t(t),signature:a??t})}function Mt({chain:e,currentChainId:t}){if(!e)throw new Je;if(t!==e.id)throw new et({chain:e,currentChainId:t})}function Ot(e,{docsPath:t,...a}){const n=(()=>{const r=Te(e,a);return r instanceof ve?e:r})();return new tt(n,{docsPath:t,...a})}async function qe(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return te(t)}class Dt extends k{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class ce extends k{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Lt extends k{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${z(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class $e extends k{constructor({blockHash:t,blockNumber:a}){let n="Block";t&&(n=`Block at hash "${t}"`),a&&(n=`Block at number "${a}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}async function U(e,{blockHash:t,blockNumber:a,blockTag:n,includeTransactions:r}={}){var f,d,l;const o=n??"latest",s=r??!1,u=a!==void 0?R(a):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[u||o,s]},{dedupe:!!u}),!c)throw new $e({blockHash:t,blockNumber:a});return(((l=(d=(f=e.chain)==null?void 0:f.formatters)==null?void 0:d.block)==null?void 0:l.format)||nt)(c)}async function Me(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function jt(e,t){var o,s;const{block:a,chain:n=e.chain,request:r}=t||{};try{const u=((o=n==null?void 0:n.fees)==null?void 0:o.maxPriorityFeePerGas)??((s=n==null?void 0:n.fees)==null?void 0:s.defaultPriorityFee);if(typeof u=="function"){const i=a||await T(e,U,"getBlock")({}),f=await u({block:i,client:e,request:r});if(f===null)throw new Error;return f}if(typeof u<"u")return u;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return ee(c)}catch{const[u,c]=await Promise.all([a?Promise.resolve(a):T(e,U,"getBlock")({}),T(e,Me,"getGasPrice")({})]);if(typeof u.baseFeePerGas!="bigint")throw new ce;const i=c-u.baseFeePerGas;return i<0n?0n:i}}async function we(e,t){var l,y;const{block:a,chain:n=e.chain,request:r,type:o="eip1559"}=t||{},s=await(async()=>{var m,w;return typeof((m=n==null?void 0:n.fees)==null?void 0:m.baseFeeMultiplier)=="function"?n.fees.baseFeeMultiplier({block:a,client:e,request:r}):((w=n==null?void 0:n.fees)==null?void 0:w.baseFeeMultiplier)??1.2})();if(s<1)throw new Dt;const c=10**(((l=s.toString().split(".")[1])==null?void 0:l.length)??0),i=m=>m*BigInt(Math.ceil(s*c))/BigInt(c),f=a||await T(e,U,"getBlock")({});if(typeof((y=n==null?void 0:n.fees)==null?void 0:y.estimateFeesPerGas)=="function"){const m=await n.fees.estimateFeesPerGas({block:a,client:e,multiply:i,request:r,type:o});if(m!==null)return m}if(o==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new ce;const m=typeof(r==null?void 0:r.maxPriorityFeePerGas)=="bigint"?r.maxPriorityFeePerGas:await jt(e,{block:f,chain:n,request:r}),w=i(f.baseFeePerGas);return{maxFeePerGas:(r==null?void 0:r.maxFeePerGas)??w+m,maxPriorityFeePerGas:m}}return{gasPrice:(r==null?void 0:r.gasPrice)??i(await T(e,Me,"getGasPrice")({}))}}class Ht extends k{constructor(t,{account:a,docsPath:n,chain:r,data:o,gas:s,gasPrice:u,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:f,to:d,value:l}){var m;const y=at({from:a==null?void 0:a.address,to:d,value:typeof l<"u"&&`${Q(l)} ${((m=r==null?void 0:r.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:o,gas:s,gasPrice:typeof u<"u"&&`${z(u)} gwei`,maxFeePerGas:typeof c<"u"&&`${z(c)} gwei`,maxPriorityFeePerGas:typeof i<"u"&&`${z(i)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:n,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",y].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function Ut(e,{docsPath:t,...a}){const n=(()=>{const r=Te(e,a);return r instanceof ve?e:r})();return new Ht(n,{docsPath:t,...a})}async function Kt(e,t){var r,o,s;const{account:a=e.account}=t,n=a?D(a):void 0;try{let A=function(q){const{block:j,request:$,rpcStateOverride:O}=q;return e.request({method:"eth_estimateGas",params:O?[$,j??"latest",O]:j?[$,j]:[$]})};const{accessList:u,authorizationList:c,blobs:i,blobVersionedHashes:f,blockNumber:d,blockTag:l,data:y,gas:m,gasPrice:w,maxFeePerBlobGas:b,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:g,value:E,stateOverride:v,...x}=await De(e,{...t,parameters:(n==null?void 0:n.type)==="local"?void 0:["blobVersionedHashes"]}),I=(typeof d=="bigint"?R(d):void 0)||l,C=rt(v),N=await(async()=>{if(x.to)return x.to;if(c&&c.length>0)return await Ge({authorization:c[0]}).catch(()=>{throw new k("`to` is required. Could not infer from `authorizationList`")})})();ne(t);const F=(s=(o=(r=e.chain)==null?void 0:r.formatters)==null?void 0:o.transactionRequest)==null?void 0:s.format,L=(F||Ie)({...Ee(x,{format:F}),from:n==null?void 0:n.address,accessList:u,authorizationList:c,blobs:i,blobVersionedHashes:f,data:y,gas:m,gasPrice:w,maxFeePerBlobGas:b,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:g,to:N,value:E});let M=BigInt(await A({block:I,request:L,rpcStateOverride:C}));if(c){const q=await st(e,{address:L.from}),j=await Promise.all(c.map(async $=>{const{address:O}=$,ze=await A({block:I,request:{authorizationList:void 0,data:y,from:n==null?void 0:n.address,to:O,value:R(q)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(ze)}));M+=j.reduce(($,O)=>$+O,0n)}return M}catch(u){throw Ut(u,{...t,account:n,chain:e.chain})}}async function zt(e,{address:t,blockTag:a="latest",blockNumber:n}){const r=await e.request({method:"eth_getTransactionCount",params:[t,typeof n=="bigint"?R(n):a]},{dedupe:!!n});return te(r)}const Oe=["blobVersionedHashes","chainId","fees","gas","nonce","type"],ge=new Map;async function De(e,t){const{account:a=e.account,blobs:n,chain:r,gas:o,kzg:s,nonce:u,nonceManager:c,parameters:i=Oe,type:f}=t,d=a&&D(a),l={...t,...d?{from:d==null?void 0:d.address}:{}};let y;async function m(){return y||(y=await T(e,U,"getBlock")({blockTag:"latest"}),y)}let w;async function b(){return w||(r?r.id:typeof t.chainId<"u"?t.chainId:(w=await T(e,qe,"getChainId")({}),w))}if(i.includes("nonce")&&typeof u>"u"&&d)if(c){const p=await b();l.nonce=await c.consume({address:d.address,chainId:p,client:e})}else l.nonce=await T(e,zt,"getTransactionCount")({address:d.address,blockTag:"pending"});if((i.includes("blobVersionedHashes")||i.includes("sidecars"))&&n&&s){const p=ot({blobs:n,kzg:s});if(i.includes("blobVersionedHashes")){const h=it({commitments:p,to:"hex"});l.blobVersionedHashes=h}if(i.includes("sidecars")){const h=ct({blobs:n,commitments:p,kzg:s}),g=ut({blobs:n,commitments:p,proofs:h,to:"hex"});l.sidecars=g}}if(i.includes("chainId")&&(l.chainId=await b()),(i.includes("fees")||i.includes("type"))&&typeof f>"u")try{l.type=dt(l)}catch{let p=ge.get(e.uid);if(typeof p>"u"){const h=await m();p=typeof(h==null?void 0:h.baseFeePerGas)=="bigint",ge.set(e.uid,p)}l.type=p?"eip1559":"legacy"}if(i.includes("fees"))if(l.type!=="legacy"&&l.type!=="eip2930"){if(typeof l.maxFeePerGas>"u"||typeof l.maxPriorityFeePerGas>"u"){const p=await m(),{maxFeePerGas:h,maxPriorityFeePerGas:g}=await we(e,{block:p,chain:r,request:l});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<g)throw new Lt({maxPriorityFeePerGas:g});l.maxPriorityFeePerGas=g,l.maxFeePerGas=h}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new ce;if(typeof t.gasPrice>"u"){const p=await m(),{gasPrice:h}=await we(e,{block:p,chain:r,request:l,type:"legacy"});l.gasPrice=h}}return i.includes("gas")&&typeof o>"u"&&(l.gas=await T(e,Kt,"estimateGas")({...l,account:d&&{address:d.address,type:"json-rpc"}})),ne(l),delete l.parameters,l}async function Qt(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const X=new lt(128);async function Vt(e,t){var h,g,E,v;const{account:a=e.account,chain:n=e.chain,accessList:r,authorizationList:o,blobs:s,data:u,gas:c,gasPrice:i,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:l,nonce:y,type:m,value:w,...b}=t;if(typeof a>"u")throw new Se({docsPath:"/docs/actions/wallet/sendTransaction"});const p=a?D(a):null;try{ne(t);const x=await(async()=>{if(t.to)return t.to;if(t.to!==null&&o&&o.length>0)return await Ge({authorization:o[0]}).catch(()=>{throw new k("`to` is required. Could not infer from `authorizationList`.")})})();if((p==null?void 0:p.type)==="json-rpc"||p===null){let P;n!==null&&(P=await T(e,qe,"getChainId")({}),Mt({currentChainId:P,chain:n}));const I=(E=(g=(h=e.chain)==null?void 0:h.formatters)==null?void 0:g.transactionRequest)==null?void 0:E.format,N=(I||Ie)({...Ee(b,{format:I}),accessList:r,authorizationList:o,blobs:s,chainId:P,data:u,from:p==null?void 0:p.address,gas:c,gasPrice:i,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:l,nonce:y,to:x,type:m,value:w}),F=X.get(e.uid),K=F?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:K,params:[N]},{retryCount:0})}catch(L){if(F===!1)throw L;const A=L;if(A.name==="InvalidInputRpcError"||A.name==="InvalidParamsRpcError"||A.name==="MethodNotFoundRpcError"||A.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[N]},{retryCount:0}).then(M=>(X.set(e.uid,!0),M)).catch(M=>{const q=M;throw q.name==="MethodNotFoundRpcError"||q.name==="MethodNotSupportedRpcError"?(X.set(e.uid,!1),A):q});throw A}}if((p==null?void 0:p.type)==="local"){const P=await T(e,De,"prepareTransactionRequest")({account:p,accessList:r,authorizationList:o,blobs:s,chain:n,data:u,gas:c,gasPrice:i,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:l,nonce:y,nonceManager:p.nonceManager,parameters:[...Oe,"sidecars"],type:m,value:w,...b,to:x}),I=(v=n==null?void 0:n.serializers)==null?void 0:v.transaction,C=await p.signTransaction(P,{serializer:I});return await T(e,Qt,"sendRawTransaction")({serializedTransaction:C})}throw(p==null?void 0:p.type)==="smart"?new Z({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Z({docsPath:"/docs/actions/wallet/sendTransaction",type:p==null?void 0:p.type})}catch(x){throw x instanceof Z?x:Ot(x,{...t,account:p,chain:t.chain||void 0})}}async function Le(e,{blockHash:t,blockNumber:a,blockTag:n,hash:r,index:o}){var f,d,l;const s=n||"latest",u=a!==void 0?R(a):void 0;let c=null;if(r?c=await e.request({method:"eth_getTransactionByHash",params:[r]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,R(o)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||s,R(o)]},{dedupe:!!u}),!c)throw new Fe({blockHash:t,blockNumber:a,blockTag:s,hash:r,index:o});return(((l=(d=(f=e.chain)==null?void 0:f.formatters)==null?void 0:d.transaction)==null?void 0:l.format)||ft)(c)}async function be(e,{hash:t}){var r,o,s;const a=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!a)throw new Ne({hash:t});return(((s=(o=(r=e.chain)==null?void 0:r.formatters)==null?void 0:o.transactionReceipt)==null?void 0:s.format)||pt)(a)}class Wt extends k{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Yt(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Wt({value:e});let[a,n="0"]=e.split(".");const r=a.startsWith("-");if(r&&(a=a.slice(1)),n=n.replace(/(0+)$/,""),t===0)Math.round(+`.${n}`)===1&&(a=`${BigInt(a)+1n}`),n="";else if(n.length>t){const[o,s,u]=[n.slice(0,t-1),n.slice(t-1,t),n.slice(t)],c=Math.round(+`${s}.${u}`);c>9?n=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):n=`${o}${c}`,n.length>t&&(n=n.slice(1),a=`${BigInt(a)+1n}`),n=n.slice(0,t)}else n=n.padEnd(t,"0");return BigInt(`${r?"-":""}${a}${n}`)}function Zt(e,t="wei"){return Yt(e,ht[t])}async function Xt(e,{confirmations:t=1,hash:a,onReplaced:n,pollingInterval:r=e.pollingInterval,retryCount:o=6,retryDelay:s=({count:c})=>~~(1<<c)*200,timeout:u=18e4}){const c=mt(["waitForTransactionReceipt",e.uid,a]);let i,f,d,l=!1;const{promise:y,resolve:m,reject:w}=yt(),b=u?setTimeout(()=>w(new wt({hash:a})),u):void 0,p=gt(c,{onReplaced:n,resolve:m,reject:w},h=>{const g=T(e,bt,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:r,async onBlockNumber(E){const v=P=>{clearTimeout(b),g(),P(),p()};let x=E;if(!l)try{if(d){if(t>1&&(!d.blockNumber||x-d.blockNumber+1n<t))return;v(()=>h.resolve(d));return}if(i||(l=!0,await fe(async()=>{i=await T(e,Le,"getTransaction")({hash:a}),i.blockNumber&&(x=i.blockNumber)},{delay:s,retryCount:o}),l=!1),d=await T(e,be,"getTransactionReceipt")({hash:a}),t>1&&(!d.blockNumber||x-d.blockNumber+1n<t))return;v(()=>h.resolve(d))}catch(P){if(P instanceof Fe||P instanceof Ne){if(!i){l=!1;return}try{f=i,l=!0;const I=await fe(()=>T(e,U,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:s,retryCount:o,shouldRetry:({error:F})=>F instanceof $e});l=!1;const C=I.transactions.find(({from:F,nonce:K})=>F===f.from&&K===f.nonce);if(!C||(d=await T(e,be,"getTransactionReceipt")({hash:C.hash}),t>1&&(!d.blockNumber||x-d.blockNumber+1n<t)))return;let N="replaced";C.to===f.to&&C.value===f.value&&C.input===f.input?N="repriced":C.from===C.to&&C.value===0n&&(N="cancelled"),v(()=>{var F;(F=h.onReplaced)==null||F.call(h,{reason:N,replacedTransaction:f,transaction:C,transactionReceipt:d}),h.resolve(d)})}catch(I){v(()=>h.reject(I))}}else v(()=>h.reject(P))}}})});return y}async function Jt(e,t){const{abi:a,address:n,args:r,dataSuffix:o,functionName:s,...u}=t,c=u.account?D(u.account):e.account,i=Be({abi:a,args:r,functionName:s});try{const{data:f}=await T(e,ke,"call")({batch:!1,data:`${i}${o?o.replace("0x",""):""}`,to:n,...u,account:c}),d=Pt({abi:a,args:r,functionName:s,data:f||"0x"}),l=a.filter(y=>"name"in y&&y.name===t.functionName);return{result:d,request:{abi:l,address:n,args:r,dataSuffix:o,functionName:s,...u,account:c}}}catch(f){throw Ae(f,{abi:a,address:n,args:r,docsPath:"/docs/contract/simulateContract",functionName:s,sender:c==null?void 0:c.address})}}async function en(e,t){const{abi:a,account:n=e.account,address:r,args:o,dataSuffix:s,functionName:u,...c}=t;if(typeof n>"u")throw new Se({docsPath:"/docs/contract/writeContract"});const i=n?D(n):null,f=Be({abi:a,args:o,functionName:u});try{return await T(e,Vt,"sendTransaction")({data:`${f}${s?s.replace("0x",""):""}`,to:r,account:i,...c})}catch(d){throw Ae(d,{abi:a,address:r,args:o,docsPath:"/docs/contract/writeContract",functionName:u,sender:i==null?void 0:i.address})}}function tn(e,t={}){const{key:a="custom",methods:n,name:r="Custom Provider",retryDelay:o}=t;return({retryCount:s})=>xt({key:a,methods:n,name:r,request:e.request.bind(e),retryCount:t.retryCount??s,retryDelay:o,type:"custom"})}async function ue(e,t={}){let a;if(t.connector){const{connector:i}=t;if(e.state.status==="reconnecting"&&!i.getAccounts&&!i.getChainId)throw new Ct({connector:i});const[f,d]=await Promise.all([i.getAccounts().catch(l=>{if(t.account===null)return[];throw l}),i.getChainId()]);a={accounts:f,chainId:d,connector:i}}else a=e.state.connections.get(e.state.current);if(!a)throw new Tt;const n=t.chainId??a.chainId,r=await a.connector.getChainId();if(r!==a.chainId)throw new vt({connectionChainId:a.chainId,connectorChainId:r});const o=a.connector;if(o.getClient)return o.getClient({chainId:n});const s=D(t.account??a.accounts[0]);if(s&&(s.address=It(s.address)),t.account&&!a.accounts.some(i=>i.toLowerCase()===s.address.toLowerCase()))throw new Et({address:s.address,connector:o});const u=e.chains.find(i=>i.id===n),c=await a.connector.getProvider({chainId:n});return Ft({account:s,chain:u,name:"Connector Client",transport:i=>tn(c)({...i,retryCount:0})})}function nn(e,t={}){return{gcTime:0,async queryFn({queryKey:a}){const{connector:n}=t,{connectorUid:r,scopeKey:o,...s}=a[1];return ue(e,{...s,connector:n})},queryKey:an(t)}}function an(e={}){const{connector:t,...a}=e;return["connectorClient",{...W(a),connectorUid:t==null?void 0:t.uid}]}function rn(e,t={}){return{async queryFn({queryKey:a}){var u;const n=[],r=a[1].contracts.length;for(let c=0;c<r;c++){const i=a[1].contracts[c],f=((u=t.contracts)==null?void 0:u[c]).abi;n.push({...i,abi:f})}const{scopeKey:o,...s}=a[1];return Nt(e,{...s,contracts:n})},queryKey:sn(t)}}function sn(e={}){const t=[];for(const a of e.contracts??[]){const{abi:n,...r}=a;t.push({...r,chainId:r.chainId??e.chainId})}return["readContracts",W({...e,contracts:t})]}async function on(e,t){const{abi:a,chainId:n,connector:r,...o}=t;let s;t.account?s=t.account:s=(await ue(e,{chainId:n,connector:r})).account;const u=e.getClient({chainId:n}),c=H(u,Jt,"simulateContract"),{result:i,request:f}=await c({...o,abi:a,account:s});return{chainId:u.chain.id,result:i,request:{...f,chainId:n}}}function cn(e,t={}){return{async queryFn({queryKey:a}){const{abi:n,connector:r}=t;if(!n)throw new Error("abi is required");const{scopeKey:o,...s}=a[1],{address:u,functionName:c}=s;if(!u)throw new Error("address is required");if(!c)throw new Error("functionName is required");return on(e,{abi:n,connector:r,...s})},queryKey:un(t)}}function un(e={}){const{abi:t,connector:a,...n}=e;return["simulateContract",W(n)]}async function je(e,t){const{chainId:a,timeout:n=0,...r}=t,o=e.getClient({chainId:a}),u=await H(o,Xt,"waitForTransactionReceipt")({...r,timeout:n});if(u.status==="reverted"){const i=await H(o,Le,"getTransaction")({hash:u.transactionHash}),d=await H(o,ke,"call")({...i,data:i.input,gasPrice:i.type!=="eip1559"?i.gasPrice:void 0,maxFeePerGas:i.type==="eip1559"?i.maxFeePerGas:void 0,maxPriorityFeePerGas:i.type==="eip1559"?i.maxPriorityFeePerGas:void 0}),l=d!=null&&d.data?Bt(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(l)}return{...u,chainId:o.chain.id}}function dn(e,t={}){return{async queryFn({queryKey:a}){const{hash:n,...r}=a[1];if(!n)throw new Error("hash is required");return je(e,{...r,onReplaced:t.onReplaced,hash:n})},queryKey:ln(t)}}function ln(e={}){const{onReplaced:t,...a}=e;return["waitForTransactionReceipt",W(a)]}async function fn(e,t){const{account:a,chainId:n,connector:r,...o}=t;let s;return typeof a=="object"&&(a==null?void 0:a.type)==="local"?s=e.getClient({chainId:n}):s=await ue(e,{account:a??void 0,chainId:n,connector:r}),await H(s,en,"writeContract")({...o,...a?{account:a}:{},chain:n?{id:n}:null})}function pn(e){return{mutationFn(t){return fn(e,t)},mutationKey:["writeContract"]}}function hn(e={}){const{query:t={},...a}=e,n=G(a),r=_e(),{address:o,connector:s,status:u}=Y({config:n}),c=ae({config:n}),i=e.connector??s,{queryKey:f,...d}=nn(n,{...e,chainId:e.chainId??c,connector:i}),l=!!((u==="connected"||u==="reconnecting"&&(i!=null&&i.getProvider))&&(t.enabled??!0)),y=B.useRef(o);return B.useEffect(()=>{const m=y.current;!o&&m?(r.removeQueries({queryKey:f}),y.current=void 0):o!==m&&(r.invalidateQueries({queryKey:f}),y.current=o)},[o,r]),re({...t,...d,queryKey:f,enabled:l,staleTime:Number.POSITIVE_INFINITY})}function mn(e={}){const{abi:t,address:a,connector:n,functionName:r,query:o={}}=e,s=G(e),{data:u}=hn({config:s,connector:n,query:{enabled:e.account===void 0}}),c=ae({config:s}),i=cn(s,{...e,account:e.account??(u==null?void 0:u.account),chainId:e.chainId??c}),f=!!(t&&a&&r&&(o.enabled??!0));return re({...o,...i,enabled:f})}function yn(e={}){const{hash:t,query:a={}}=e,n=G(e),r=ae({config:n}),o=dn(n,{...e,chainId:e.chainId??r}),s=!!(t&&(a.enabled??!0));return re({...a,...o,enabled:s})}function wn(e={}){const{mutation:t}=e,a=G(e),n=pn(a),{mutate:r,mutateAsync:o,...s}=kt({...t,...n});return{...s,writeContract:r,writeContractAsync:o}}function gn(e){return!isNaN(Number(e))}function bn(e){return gn(e)?e:"0"}const Pn=({ref:e,className:t,type:a,showMaxButton:n,onMaxClick:r,label:o,value:s=0n,min:u,max:c,onChange:i=()=>{},onBlur:f,isError:d,...l})=>{const[y,m]=B.useState(!1),w=y?"":Q(s),b=u!=null?Q(u):void 0,p=c!=null?Q(c):void 0,h=P=>P.target.select(),g=()=>{c&&i(c)},E=P=>{P.target.value===""?m(!0):m(!1);const I=Zt(bn(P.target.value)),C=I<0n?-I:I;i(C)},v=(...P)=>{m(!1),f==null||f(...P)},x=s===c;return S.jsxs("div",{className:pe("relative flex items-center",t),children:[S.jsx("input",{type:"number",className:pe("file:font-foreground ring-offset-background focus-visible:border-brand flex h-[44px] w-full border border-white/20 bg-white/10 px-3 py-2 file:border-0 file:bg-transparent file:text-sm placeholder:text-white/50 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",n&&"pr-16"),min:b,max:p,ref:e,...l,onFocus:h,onChange:E,onBlur:v,value:w}),n&&S.jsx(At,{variant:"ghost",size:"sm",className:"absolute right-[6px] px-2",onClick:g,disabled:x,children:"MAX"})]})};Pn.displayName="Input";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,n)=>n?n.toUpperCase():a.toLowerCase()),Pe=e=>{const t=Cn(e);return t.charAt(0).toUpperCase()+t.slice(1)},He=(...e)=>e.filter((t,a,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===a).join(" ").trim(),Tn=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=B.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:s,...u},c)=>B.createElement("svg",{ref:c,...vn,width:t,height:t,stroke:e,strokeWidth:n?Number(a)*24/Number(t):a,className:He("lucide",r),...!o&&!Tn(u)&&{"aria-hidden":"true"},...u},[...s.map(([i,f])=>B.createElement(i,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=(e,t)=>{const a=B.forwardRef(({className:n,...r},o)=>B.createElement(In,{ref:o,iconNode:t,className:He(`lucide-${xn(Pe(e))}`,`lucide-${e}`,n),...r}));return a.displayName=Pe(e),a};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Nn=En("arrow-up-right",Fn);function J({hash:e,chainId:t=1}){return S.jsx("a",{href:`${xe[t]??xe[1]}/${e}`,target:"_blank",className:"transtion-all rounded px-2 py-1 outline hover:bg-white/10 active:bg-white/20",children:S.jsxs("div",{className:"flex items-center",children:["View on Etherscan ",S.jsx(Nn,{size:16})]})})}const xe={1:"https://etherscan.io/tx",11155111:"https://sepolia.etherscan.io/tx"};function Ue(e){const t=he.useRef(e);return he.useLayoutEffect(()=>{t.current=e}),t}function Ke(e){var p;const{abi:t,address:a,connector:n,functionName:r,query:o={},signToast:s={},transactionToast:u={},invalidates:c=[],onSuccess:i=()=>{}}=e,f=G(),d=wn({mutation:{onSuccess(h,g,E){const v=je(f,{hash:h});me.promise(v,{loading:u.loading??"Transaction in progress...",success:{message:"Transaction Successful",action:S.jsx(J,{hash:h,chainId:g.chainId}),...u.success},error:{message:"Transaction Failed",action:S.jsx(J,{hash:h,chainId:g.chainId}),...u.error}})}}}),l=mn({...e}),y=()=>l.data&&me.promise(d.writeContractAsync(l.data.request),{loading:s.loading??"Please sign the transaction in your wallet...",success:h=>{var g;return{message:"Transaction signed",action:S.jsx(J,{hash:h,chainId:(g=d.variables)==null?void 0:g.chainId}),...s.success}},error:h=>({message:`Transaction Error${typeof h=="object"&&h!==null&&"shortMessage"in h?`: ${h.shortMessage}`:""}`,...s.error})}),m=yn({hash:d.data,query:{enabled:!!d.data,meta:{invalidates:c}}}),w=d.isPending||m.isLoading,b=Ue(i);return B.useEffect(()=>{var h,g;(h=m.data)!=null&&h.blockHash&&((g=b.current)==null||g.call(b))},[(p=m.data)==null?void 0:p.blockHash,b]),{sim:l,write:d,wait:m,action:y,isPending:w}}function Bn({spendingAmount:e,tokenAddress:t,spenderAddress:a}){const{address:n}=Y(),r=G(),o=oe(Re(r,{address:t,abi:se,functionName:"allowance",args:[n??ie,a]})),s=e>=0n&&e<=(o.data??0n);return{approvalStatus:o,isApproved:s}}function kn({spendingAmount:e,tokenAddress:t,spenderAddress:a,tokenName:n="token"}){const{isApproved:r}=Bn({spendingAmount:e,tokenAddress:t,spenderAddress:a}),o=Ke({address:t,abi:se,functionName:"approve",args:[a,Rt],invalidates:[[,{address:t}],[,{address:a}]],signToast:{loading:"Please sign the approve transaction in your wallet"},transactionToast:{loading:"Approval in progress...",success:{message:"Approval Successful",description:`Successfully approved ${n}`},error:{message:"Staking failed",description:`There was an error approving ${n}`}}}),s=o.write.isPending?"wallet":o.wait.isPending?"transaction":void 0;return{isApproved:r,approveAction:o.action,approveWait:o.wait,isPending:o.isPending,loadingPhase:s}}function An(){const{data:e}=_t({watch:!0}),{address:t}=Y(),a=_e(),n=G(),r=rn(n,{contracts:[{abi:V,address:_.AUCTION_ADDRESS,functionName:"auction"},{abi:V,address:_.AUCTION_ADDRESS,functionName:"nextAuctionId"},{abi:V,address:_.AUCTION_ADDRESS,functionName:"auctionBids",args:[t??ie]}]}),o=oe({...r,select:u=>{const[{result:[c,i,f,d,l,y,m,w]=[]},{result:b},{result:p}]=u,h=l?new Date(Number(d??0)*1e3).getTime()-new Date().getTime()<=0?"closed":"open":"complete",g=(()=>{if(p===0n||!p)return"notbidding";const C=h==="open"?"winning":"won",N=h==="open"?"losing":"lost";return(i==null?void 0:i.toLowerCase())===(t==null?void 0:t.toLowerCase())?C:N})(),E=(w??0n)>0n?y:m,v=(w??0n)-(p??0n)+(E??0n),x=v+(p??0n),P=h==="complete",I=["open","closed"].includes(h);return{auctionWallet:c,highestBidder:i,startTime:f,endTime:d,auctionActive:l,minimumIncreaseAmount:y,minimumStartingBid:m,minimumBid:E,highestBid:w,status:h,userStatus:g,currentAuctionId:b?b-1:0,nextAuctionId:b,userBid:p,minimumUserBid:v,minimumNextTotalBid:x,canStart:P,canEnd:I}}}),s=Ue(r.queryKey);return B.useEffect(()=>{a.invalidateQueries({queryKey:s.current})},[e,a,s]),o}function qn({amount:e=0n,onSuccess:t}={}){var l,y,m,w,b;const a=An(),n=_n(),r=kn({spendingAmount:e,tokenAddress:_.BYTES_ADDRESS,spenderAddress:_.AUCTION_ADDRESS,tokenName:"BYTES"}),o=Ke({abi:V,address:_.AUCTION_ADDRESS,functionName:"bid",onSuccess:t,args:[((l=a.data)==null?void 0:l.currentAuctionId)??0,e-(((y=a.data)==null?void 0:y.userBid)??0n)],invalidates:[[,{address:_.AUCTION_ADDRESS}],[,{address:_.BYTES_ADDRESS}]]}),s=n.data,u=((m=a.data)==null?void 0:m.userBid)??0n,c=s+u,i=r,f=((w=a.data)==null?void 0:w.minimumUserBid)??0n,d=(b=a.data)==null?void 0:b.minimumNextTotalBid;return{...o,availableBytes:s,availableBytesTotal:c,approval:i,minimumNextBid:f,minimumNextTotalBid:d,userBid:u}}function _n(){const{address:e}=Y(),t=G();return oe(Re(t,{address:_.BYTES_ADDRESS,abi:se,functionName:"balanceOf",args:[e??ie]}))}export{Pn as E,An as a,qn as b,Ue as c,Zt as p,Ke as u};
