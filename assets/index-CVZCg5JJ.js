import{j as e,c as T,r as o,d as O,f as B,B as j}from"./main-CVmT0YyI.js";import{u as S,a as P,p as I,E}from"./useAuction-BzxEPf3I.js";import{C as c,A as C}from"./constants-BNADs_9s.js";import"./useSuspenseQuery-CACd6q5J.js";function M({className:i,type:t,...n}){return e.jsx("input",{type:t,"data-slot":"input",className:T("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",i),...n})}var z=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],F=z.reduce((i,t)=>{const n=O(`Primitive.${t}`),s=o.forwardRef((a,m)=>{const{asChild:r,...x}=a,d=r?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...x,ref:m})});return s.displayName=`Primitive.${t}`,{...i,[t]:s}},{}),W="Label",D=o.forwardRef((i,t)=>e.jsx(F.label,{...i,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=i.onMouseDown)==null||a.call(i,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));D.displayName=W;var L=D;function u({className:i,...t}){return e.jsx(L,{"data-slot":"label",className:T("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",i),...t})}function k({startAuctionArgs:i,endAuctionArgs:t}={}){const n=S({abi:C,address:c.AUCTION_ADDRESS,functionName:"startAuction",args:i,invalidates:[[,{address:c.AUCTION_ADDRESS}]]}),s=S({abi:C,address:c.AUCTION_ADDRESS,functionName:"endAuction",args:t,invalidates:[[,{address:c.AUCTION_ADDRESS}]]});return{startAuction:n,endAuction:s}}const p={DEFAULT_AUCTION_PARAMS:{MINIMUM_STARTING_BID:"10",MINIMUM_INCREASE_AMOUNT:"1",DURATION_HOURS:24}},q=function(){var N,f,g,v,b;const t=P(),[n,s]=o.useState(""),[a,m]=o.useState(I(p.DEFAULT_AUCTION_PARAMS.MINIMUM_STARTING_BID)),[r,x]=o.useState(I(p.DEFAULT_AUCTION_PARAMS.MINIMUM_INCREASE_AMOUNT)),[d,_]=o.useState(p.DEFAULT_AUCTION_PARAMS.DURATION_HOURS.toString()),w=n&&a&&r&&d?[n,a,r,BigInt(parseInt(d)*3600)]:void 0,U=(N=t.data)!=null&&N.currentAuctionId?[t.data.currentAuctionId]:void 0,{startAuction:A,endAuction:h}=k({startAuctionArgs:w,endAuctionArgs:U}),R=async()=>{if(!n||a===0n||r===0n||!d){alert("Please fill in all fields");return}A.action()},y=async()=>{var l;if(!((l=t.data)!=null&&l.currentAuctionId)){alert("No active auction to end");return}h.action()};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg border border-zinc-800 p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Current Auction Status"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-400",children:"Status:"}),e.jsx("span",{className:"ml-2 capitalize",children:(f=t.data)==null?void 0:f.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-400",children:"Auction ID:"}),e.jsx("span",{className:"ml-2",children:(g=t.data)==null?void 0:g.currentAuctionId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-400",children:"Highest Bid:"}),e.jsxs("span",{className:"ml-2",children:[B(((v=t.data)==null?void 0:v.highestBid)??0n)," BYTES"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-400",children:"Auction Wallet:"}),e.jsx("span",{className:"ml-2 font-mono text-xs",children:(b=t.data)==null?void 0:b.auctionWallet})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-zinc-800 p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Start New Auction"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"auctionWallet",children:"Auction Wallet Address"}),e.jsx(M,{id:"auctionWallet",type:"text",placeholder:"0x...",value:n,onChange:l=>s(l.target.value),className:"font-mono"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"minimumStartingBid",children:"Minimum Starting Bid (BYTES)"}),e.jsx(E,{id:"minimumStartingBid",placeholder:"100",value:a,onChange:m,min:0n})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"minimumIncreaseAmount",children:"Minimum Increase Amount (BYTES)"}),e.jsx(E,{id:"minimumIncreaseAmount",placeholder:"10",value:r,onChange:x,min:0n})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"duration",children:"Duration (hours)"}),e.jsx(M,{id:"duration",type:"number",placeholder:"24",value:d,onChange:l=>_(l.target.value)})]}),e.jsx(j,{onClick:R,disabled:A.isPending||!t.data.canStart,className:"w-full",children:A.isPending?"Starting...":"Start Auction"}),!t.data.canStart&&e.jsx("p",{className:"text-sm text-yellow-400",children:"Cannot start a new auction while one is already active"})]})]}),e.jsxs("div",{className:"rounded-lg border border-zinc-800 p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"End Current Auction"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-zinc-400",children:"End the current auction manually. This will finalize the auction and transfer the winning bid."}),e.jsx(j,{onClick:y,disabled:h.isPending||!t.data.canEnd,variant:"destructive",className:"w-full",children:h.isPending?"Ending...":"End Auction"}),!t.data.canEnd&&e.jsx("p",{className:"text-sm text-zinc-400",children:"No active auction to end"})]})]})]})};export{q as component};
